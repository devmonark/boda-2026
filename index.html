<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Álbum Elegante Premium</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            /* TU FONDO */
            background: url('fondo.png') center/cover no-repeat;
            background-color: #f4ece1;
            overflow: hidden;
            font-family: serif;
        }

        /* --- BOTONES DE NAVEGACIÓN --- */
        .btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #d4af37;
            color: #d4af37;
            font-size: 30px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 10000;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .btn:hover { background: #d4af37; color: white; transform: translateY(-50%) scale(1.1); }
        .btn:disabled { opacity: 0; pointer-events: none; }
        .btn.prev { left: 30px; }
        .btn.next { right: 30px; }

        /* --- ESCENARIO (CÁMARA) --- */
        .scene {
            position: relative;
            /* Tamaño base para PC (Muestra 2 páginas) */
            width: 800px; 
            height: 550px;
            perspective: 3000px;
        }

        /* --- EL LIBRO --- */
        .book {
            position: absolute;
            top: 0; left: 0;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 1s cubic-bezier(0.645, 0.045, 0.355, 1);
        }

        /* --- LAS HOJAS FÍSICAS --- */
        .sheet {
            position: absolute;
            top: 0;
            right: 0;
            width: 50%; /* Cada hoja es la mitad del libro */
            height: 100%;
            transform-origin: left center;
            transform-style: preserve-3d;
            transition: transform 1.2s cubic-bezier(0.645, 0.045, 0.355, 1);
        }

        .face {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            backface-visibility: hidden;
            background-size: cover;
            background-position: center;
            background-color: #fff;
        }

        .front {
            box-shadow: inset 10px 0 20px rgba(0,0,0,0.05), 5px 5px 15px rgba(0,0,0,0.1);
        }

        .back {
            transform: rotateY(180deg);
            box-shadow: inset -10px 0 20px rgba(0,0,0,0.05), -5px 5px 15px rgba(0,0,0,0.1);
        }

        .sheet.flipped {
            transform: rotateY(-180deg);
        }

        /* --- ENGARGOLADO FLORAL DORADO --- */
        .binding {
            position: absolute;
            left: 50%;
            top: 3%;
            bottom: 3%;
            transform: translateX(-50%);
            width: 40px;
            z-index: 100;
            display: flex;
            flex-direction: column;
            justify-content: space-evenly;
            align-items: center;
            pointer-events: none;
        }

        .flower {
            color: #d4af37;
            font-size: 24px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5), 0 0 8px rgba(212,175,55,0.4);
            position: relative;
        }

        /* Anillo metálico debajo de la flor */
        .flower::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 28px;
            height: 4px;
            background: linear-gradient(90deg, #8a6327, #fcf6ba, #8a6327);
            border-radius: 2px;
            z-index: -1;
            box-shadow: 1px 2px 3px rgba(0,0,0,0.4);
        }

        /* --- MODO MÓVIL (Vista secuencial de 1 página) --- */
        @media (max-width: 768px) {
            .scene {
                width: 85vw;
                max-width: 400px; /* Ancho de solo UNA página */
                height: 65vh;
                overflow: hidden; /* Oculta lo que no se está leyendo */
                border-radius: 4px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            }
            .book {
                width: 200%; /* El libro mide el doble que la ventana de la cámara */
            }
            .btn { width: 45px; height: 45px; font-size: 24px; }
            .btn.prev { left: 10px; }
            .btn.next { right: 10px; }
            .front, .back { box-shadow: none; border: 1px solid rgba(0,0,0,0.05); }
        }
    </style>
</head>
<body>

    <button class="btn prev" id="btn-prev" onclick="goPrev()">‹</button>
    <button class="btn next" id="btn-next" onclick="goNext()">›</button>

    <div class="scene" id="scene">
        <div class="book" id="book">
            
            <div class="binding" id="binding"></div>

            <div class="sheet" id="sheet2" style="z-index: 1;">
                <div class="face front" style="background-image: url('3.png');"></div> <div class="face back" style="background-image: url('4.png');"></div>  </div>

            <div class="sheet" id="sheet1" style="z-index: 2;">
                <div class="face front" style="background-image: url('1.png');"></div> <div class="face back" style="background-image: url('2.png');"></div>  </div>

        </div>
    </div>

    <script>
        // 1. Generar el engargolado de flores automáticamente
        const binding = document.getElementById('binding');
        for(let i=0; i<12; i++) {
            const f = document.createElement('div');
            f.className = 'flower';
            f.innerHTML = '❀'; // Símbolo de flor elegante
            binding.appendChild(f);
        }

        // 2. Lógica Matemática Inteligente
        let currentStep = 0;

        // Configuración para Móvil (4 Pasos exactos: 1, 2, 3, 4)
        const statesMobile = [
            { s1: false, s2: false, camera: "-50%" }, // Paso 0: Enfoca Portada (Derecha)
            { s1: true,  s2: false, camera: "0%" },   // Paso 1: Enfoca Contenido Izq (Izquierda)
            { s1: true,  s2: false, camera: "-50%" }, // Paso 2: Enfoca Contenido Der (Derecha)
            { s1: true,  s2: true,  camera: "0%" }    // Paso 3: Enfoca Contraportada (Izquierda)
        ];

        // Configuración para PC (3 Pasos exactos: Portada -> Abierto -> Contraportada)
        const statesDesktop = [
            { s1: false, s2: false, camera: "-25%" }, // Paso 0: Centra la Portada
            { s1: true,  s2: false, camera: "0%" },   // Paso 1: Libro Abierto (Muestra pág 2 y 3 juntas)
            { s1: true,  s2: true,  camera: "25%" }   // Paso 2: Centra la Contraportada
        ];

        const book = document.getElementById('book');
        const sheet1 = document.getElementById('sheet1');
        const sheet2 = document.getElementById('sheet2');
        const btnPrev = document.getElementById('btn-prev');
        const btnNext = document.getElementById('btn-next');

        function updateBook() {
            // Detectar si estamos en móvil o PC
            const isMobile = window.innerWidth <= 768;
            const states = isMobile ? statesMobile : statesDesktop;
            const maxSteps = states.length - 1;

            // Protección en caso de que gires el celular o redimensiones
            if (currentStep > maxSteps) currentStep = maxSteps;

            const state = states[currentStep];

            // Girar las hojas correspondientes
            if (state.s1) sheet1.classList.add('flipped');
            else sheet1.classList.remove('flipped');

            if (state.s2) sheet2.classList.add('flipped');
            else sheet2.classList.remove('flipped');

            // Mover la cámara/libro para centrar la vista correcta
            book.style.transform = `translateX(${state.camera})`;

            // Mostrar/Ocultar botones
            btnPrev.disabled = currentStep === 0;
            btnNext.disabled = currentStep === maxSteps;
        }

        function goNext() {
            currentStep++;
            updateBook();
        }

        function goPrev() {
            currentStep--;
            updateBook();
        }

        // Si el usuario cambia el tamaño de la ventana (PC a Móvil), recalcular al instante
        window.addEventListener('resize', updateBook);

        // Iniciar el libro en la portada
        updateBook();
    </script>
</body>
</html>